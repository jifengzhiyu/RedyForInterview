# 问的

你好，请问一下：

1. 前端把返回token放到cookie里面。前端拦截器判断cookie是否有token，如果有，把token放到header里面。调用接口根据token查数据库获取用户信息。这就意味每次都需要解析cookie，并且查阅数据库。针对这点请问有什么优化的建议吗？
   登陆成功将用户数据信息缓存下来，下次直接查询缓存

   

2. 在配置中心里面把一个a文件修改了，然后服务端是怎么知道文件修改了，怎么去检测？这个是长轮询那里的东西吧？

   https://blog.csdn.net/m0_57042151/article/details/126901640

   http://t.csdn.cn/pZKPC

   **轮询**是指不管服务端数据有无更新，客户端每隔定长时间请求拉取一次数据，可能有更新数据返回，也可能什么都没有。

   客户端发起长轮询，如果服务端的数据没有发生变更，会 hold 住请求，直到服务端的数据发生变化，或者等待一定时间超时才会返回。

   - 首先客户端发起长轮询请求，监听变更的dataId+group，服务端收到客户端的请求，这时会挂起客户端的请求，如果在服务端设计的29.5s之内都没有发生变更，服务端会响应回客户端数据没有变更，客户端会继续发送请求。
   - 如果在29.5s之内服务数据发生了变更，服务端会''推送''变更的数据到客户端。
     



1. 自我介绍
2. 学java/计算机转变过程
3. 怎么学的，学习计划
4. 有无考研的计划或者考公的计划
5. 是哪里人？以后想在哪些城市去发展
6. 项目是你自己去自己去练练手的，还是说是根根据公司的团队去做的
7. 是想签三方的，还是想单纯的实习

---

1. 项目怎么搭建的，然后怎么去设计的，然后你得讲一下设计心得
   介绍项目

2. 是自己通过视频去学习的吗？怎么知道一些技术栈的

3. 部署在阿里云的，是还是什么？腾讯云还是吗？就是云上的是吧
   本地

4. 单点登录怎么做
   每次都是解析cooki的是吧，cookie是存放在信息是一个铭文信息吗？
   就是一个用户id的类似于对。那等于说每次一个请求都会查一次数据库

5. springBoot，了解多少？AOP IOC介绍一下

6. springBoot常用的注解，能说几个吗？

7. 为什么用mybatis，为什么不用mybatisPlus，选型的过程，你是怎么考虑的

8. easyExcel相对POI好处？

   区别在于设计的方式：
   POI一次性将数据进行加载，有时候会出现OOM（Out of Memory内存溢出）。
   easyExcel流式读取，按行解析，可以指定读前一些行，更加安全，也使用流式写。

9. **mysql怎么去分析。比如查询几张表挺复杂的，然后响应时间也比较久，怎么去定位，分析怎么去优化**

   （翻译过来）慢查询的定位分析优化

   - 慢查询：执行很慢的查询，超过long_query_time参数设定的时间阈值（默认10s），需要优化。
   - 开启慢查询日志，找到慢SQL语句

   1. sql语句是否冗余，比如加载了许多结果中并不需要的列，查了多余的列就去掉
   2. 没有建立索引，就建立索引
   3. 使用`EXPLAIN`关键字分析语句的**执行计划**，修改语句使得尽可能命中索引，对索引进行优化
   4. 考虑表中的数据量是否太大，可以进行横向或者纵向分表。

10. **怎么知道，索引没有生效，怎么去分析？**

    explain 关键字，加在select 前面，possible_keys会显示索引名，key会显示实际使用的索引。

11. **执行计划里面有哪些列？怎么分析的？(拉开差距的一个地方)，mysql定位能力？**

    https://blog.csdn.net/qq_34202873/article/details/121064539

    - 执行计划是MySQL访问的路径，MySQL会自动优化选择执行计划。
    - 使用explain 关键字
      - **ID**（执行顺序，值越大，优先级越高）
      - **select_type** (查询类型)
        - **SIMPLE** ，简单的select查询，未使用UNION和子查询
        - **PRIMARY**，外层的查询。
        - **SUBQUERY**，子查询……
      - **table:** 此次查询访问的表
      - **type**:搜索数据的方法
        - **const**：通过索引一次命中，匹配一行数据
        - **ALL**: 表示全表扫描，这个类型的查询是性能最差的查询之一
        - **range**: 使用索引进行范围查询:……
      - **possible_keys**：可能用到的索引
      - **key**：当前查询真正使用到的索引
      - **key_len**: 查询索引使用的字节数。越少越好
      - **ref**: 查询的列或常量
      - **rows**: 需要扫描的行数，估计值。通常越少越好……

12. **需要/不需要索引的原则（男女索引）**

13. **索引失效场景你知道吗？（最左原则）**

14. **InnoDB MyISM区别，优缺点**

    - InnoDB（MySQL的默认存储引擎）
    - MyISM（MySQL5.5之前的默认存储引擎）

    1. **是否支持行级锁** : MyISAM 只有表级锁，而InnoDB 支持行级锁和表级锁（每次操作是对整个表加锁）,默认为行级锁。

    2. **是否支持事务和崩溃后的安全恢复： MyISAM** 强调的是性能，每次查询具有原子性,其执行速度比InnoDB类型更快，但是不提供事务支持。但是**InnoDB** 提供事务支持。 具有事务(commit)、回滚(rollback)和崩溃修复能力的事务安全型表。

    3. **是否支持外键：** MyISAM不支持，而InnoDB支持。

    4. **索引实现**：InnoDB的主键索引一般采用聚集索引的形式（叶子节点存储完整的行数据），MyISAM无论是主键索引还是辅助索引都在用非聚集索引（叶子节点只存储数据地址），需要回表。

    5. InnoDB的数据文件本身就是索引文件，

       MyISAM索引文件和数据文件分离 ，索引文件仅保存数据记录的地址。

    6. InnoDB要求表必须有主键 （ MyISAM可以没有 ）。如果没有显式指定，则MySQL系统会自动选择一个 可以非空且唯一标识数据记录的列作为主键。如果不存在这种列，则MySQL自动为InnoDB表生成一个隐含字段作为主键，这个字段长度为6个字节，类型为长整型。

    优缺点：

    - 大多数时候使用 InnoDB 
    - MyISM 最大的缺陷就是崩溃后无法安全恢复；适合**读密集**的情况，因为**索引所占空间小**，叶子节点不存储所有数据；因为每次查询具有原子性，执行速度更快。

15. **mysql的一些常用的日志文件吗？比如说他binlog文件，undo log，redo log……这些这些文件了解过？**

    主要包含以下几类日志文件：

    - 错误日志（error log）：记录MySQL运行期间产生的错误信息

    - 二进制日志（binlog）：记录对数据库的所有修改操作（不记录`select`和`show`操作），方便对数据库进行 **恢复**、**复制**、**审计**。

      > 注意把binlog，undo log，redo log进行区分！
      >
      > binlog是数据库产生的，binlog记录的是SQL语句；而后两个是存储引擎产生的，记录的是行/页的修改！

    - 慢查询日志（slow query log）：记录执行时间较长的SQL语句的日志，以便对数据库进行SQL语句层面的优化。

    - 查询日志（log）：记录对MySQL数据库请求的信息，无论该请求是否得到了正确的执行。

16. 事物的隔离级别

17. **@Transactional修饰的私有方法抛出异常，这个事物会生效吗，会回滚吗**
    不会，扫描只会扫描public方法

18. **Nacos来做配置中心，它是基于什么来作为一个系统和系统之间的区分，比如，Nacos注册n多系统，然后他是通过什么去区分？**
    用nameSpace做控制

    - 配置集( Data ID）：一个配置文件
    - 配置分组（Group）：对配置集进行分组
    - 命名空间(Namespace)：用来区分不同的环境，开发环境dev，测试环境test和生产环境prod

19. Nacos和服务端是之间是怎么通信？（放一放）
    长链接，不是实际的一个长链接，它是一个http请求，请求的超时时间30秒还多少，就是非常长了一个时间来做这个事情，也做了一层压缩，所以说他的文件大小比对什么的效率都是非常高的

20. 在配置中心里面把一个a文件修改了，然后服务端是怎么知道文件修改了，怎么去检测？（放一放）

    自己查的：长轮询

21. Redis的话，哪几种类型的存储结构，然后为什么快？

# 给的建议

1. 回答流利体现功底：校招实习更注重一些基本功的熟练度，给一个知识，对这个知识，要非常流畅。一些工作原理，你可能不清楚，很正常。最主要java基础，mysql，Redis无论是哪个公司就是非常核心的，然后es，hbase，kafka一些常用队列
2. 技术的边界：知道工作原理，为什么这个不用那个，你的选型的理论依据，应用场景，需求
   - 比如说用文件型数据库还是用关系性数据库，边界无非就是事务，文件型吞吐量是比较大，可以进行大数据量的存储，读写效率比较高。
   - 做评论的一个系统，它可能涉及到一些楼中的回复和一些关键词的搜索，用mysql的like去做查询，肯定效率比较低。那肯定是用es这种可以分词作一个汉字的搜索。
3. 培养的方案？
   - 一对一 几个月
   - 做项目，做一些功能性的开发和设计，挖掘项目点，看兴趣找方向（如大数据），专题培训
4. 可以问一下公司用的什么技术战？
   springboot，spring，数据库用mysql，持久层MybatisPlus，mysql，es，hbase
5. Mq和Kafka
   队列，常用的mq，比如像rabbitMQ，RockerMQ、Kafka。消息队列产生的原因是什么？削峰解耦还是什么，相关知识点包括吞吐量的对比，理论选型之间的过程的应该是一个吞吐量还是消息丢失的角度来看你技术选型。
   mq消息丢失、消费重复消费、消息积压都是一些很非常核心的问题
6. 还有什么中间件需要了解一下。
   数据量比较大的时候，水平和垂直拆分，一些复杂场景索引可能覆盖不到就很复杂了，分表就应运而生，有一个中中间件的帮你做这个事情，Mycat，sharding，是一个高并发一个大数据量的一个设计场景。

